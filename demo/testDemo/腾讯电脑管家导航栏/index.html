<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>腾讯电脑导航</title>
    <link rel="stylesheet" href="../../../css/base.css">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="header">
        <h1 class="logo">
            <a href="#">
                腾讯电脑管家，电脑安全专家
            </a>
        </h1>
        <div id="top-line"></div>
        <ul id="nav">
            <li class="item">
                <a href="#">首页</a>
            </li>
            <li class="item">
                <a href="#" class="icon">
                    产品介绍
                    <i></i>
                </a>
                <ul class="sub-nav">
                    <li><a href="">杀毒防护</a></li>
                    <li><a href="">电脑加速</a></li>
                    <li><a href="">游戏加速</a></li>
                    <li><a href="">等级加速</a></li>
                    <li><a href="">账户保护</a></li>
                    <li><a href="">手游助手</a></li>
                </ul>
            </li>
            <li class="item">
                <a href="#" class="icon">
                    活动中心
                    <i></i>
                </a>
                <ul class="sub-nav">
                    <li><a href="#">兑换礼金</a></li>
                    <li><a href="#">赚安全币</a></li>
                    <li><a href="#">专题活动</a></li>
                </ul>
            </li>
            <li class="item">
                <a href="#" class="icon">
                    在线安全
                    <i></i>
                </a>
                <ul class="sub-nav">
                    <li><a href="#">电脑诊所</a></li>
                    <li><a href="#">申诉举报</a></li>
                    <li><a href="#">诈骗信息查询</a></li>
                    <li><a href="#">网站安全监测</a></li>
                    <li><a href="#">密码安全监测</a></li>
                    <li><a href="#">联合实验室</a></li>
                </ul>
            </li>
            <li class="item"><a href="#">论坛</a></li>
        </ul>
        <div class="login">
            <a href="#" class="login-in">登录</a>
        </div>
        <div class="tool-bar">
            <a href="#" class="mobile"></a>
            <a href="#" class="mac"></a>
            <a href="#" class="global"></a>
        </div>
    </div>
    <div class="banner"></div>
    <script>
        (function () {
            var $ ={
                byId:function (id,obj) {
                    return (obj||document).getElementById(id);
                },
                byClass:function (cls,obj) {
                    if(document.getElementsByClassName){
                        return (obj||document).getElementsByClassName(cls);
                    }else{
                        var eles =(obj||document).getElementsByTagName("*"),
                            arr=[],
                            reg =new RegExp("(\\s|^)"+cls+"(\\s|$)");
                        for(var i=0,len=eles.length;i<len;i++){
                            if(reg.test(eles[i])){
                                arr.push(eles[i])
                            }
                        }
                        return arr;
                    }
                },
                getCss:function(obj,attr){
                    if(obj.currentStyle){
                        return obj.currentStyle[attr];
                    }else{
                        return getComputedStyle(obj,null)[attr];
                    }
                }
            };
            var nav =$.byId("nav");
            var item =$.byClass("item",nav);
            var sub =$.byClass("sub-nav",nav);
            var line =$.byId("top-line");
            var h=[180,90,180];
            for(var i=0,len=item.length;i<len;i++){
                item[i].index=i;
                item[i].onmouseover =function (e) {
                    e=event ||window.event;
                    if(e.stopPropagation){
                        e.stopPropagation();
                    }else{
                        e.cancelBubble=true;
                    }
                    line.style.width =item[this.index].offsetWidth+"px";
                    var Y=item[this.index].offsetLeft+255;
                    move(line,"left",Y,10);
                    for(var j=0,r=sub.length;j<r;j++){
                        sub[j].pos=h[j];
                        sub[j].style.border="none"
                    }
                    if(sub[this.index-1]){
                        sub[this.index-1].style.border="1px solid #e9eaea";
                        move(sub[this.index-1],"height",sub[this.index-1].pos,20);

                    }
                };
                item[i].onmouseout=function () {
                    var x=this.index-1;
                    if(sub[x]){
                        move(sub[x],"height",0,20);
                    }
                }
            }
            nav.onmouseout =function () {
                line.style.width ="74px";
                move(line,"left",255,10);

            };
            function move(obj,attr,tar,interval){
                obj.timer&&clearInterval(obj.timer);
                obj.timer =setInterval(function () {
                    var cur =parseInt(parseFloat($.getCss(obj,attr)));
                    var speed =(tar-cur)/5;
                    speed =speed>0?Math.ceil(speed):Math.floor(speed);
                    cur +=speed;
                    obj.style[attr]=cur+"px";
                    if(cur ===tar){
                        clearInterval(obj.timer);
                        obj.timer=null;
                    }
                },interval)
            }
        })();
    </script>
</body>
</html>