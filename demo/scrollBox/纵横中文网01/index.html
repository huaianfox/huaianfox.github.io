<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>纵横中文网</title>
    <link rel="stylesheet" href="../../../css/base.css">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div id="main">
        <div id="pic" role="listbox">
            <a href="#">
                <img src="images/01.jpg" alt="大夏王侯" title="大夏王侯">
            </a>
            <a href="#">
                <img src="images/02.jpeg" alt="大夏王侯" title="大夏王侯">
            </a>
            <a href="#">
                <img src="images/03.jpg" alt="大夏王侯" title="大夏王侯">
            </a>
            <a href="#">
                <img src="images/04.jpeg" alt="大夏王侯" title="大夏王侯">
            </a>
            <a href="#">
                <img src="images/05.jpg" alt="大夏王侯" title="大夏王侯">
            </a>
        </div>
        <div id="tab" role="listbox">
            <a href="#" class="on">
                <img src="images/01.jpg" alt="大夏王侯" title="大夏王侯">
            </a>
            <a href="#">
                <img src="images/02.jpeg" alt="大夏王侯" title="大夏王侯">
            </a>
            <a href="#">
                <img src="images/03.jpg" alt="大夏王侯" title="大夏王侯">
            </a>
            <a href="#">
                <img src="images/04.jpeg" alt="大夏王侯" title="大夏王侯">
            </a>
            <a href="#">
                <img src="images/05.jpg" alt="大夏王侯" title="大夏王侯">
            </a>
        </div>
        <div class="text">
            <h2><a href="http://book.zongheng.com/book/458842.html" id="title" title="大夏王侯">大夏王侯</a></h2>
            <p><a href="http://book.zongheng.com/book/458842.html" id="info" title="入后宫，斗帝妃，封一品">入后宫，斗帝妃，封一品</a></p>
        </div>
    </div>
    <script>
        window.onload = function(){
            var main = document.getElementById("main");
            var pic = document.getElementById("pic");
            var img =pic.getElementsByTagName("a");
            var tab =document.getElementById("tab");
            var list = tab.getElementsByTagName("a");
            var tit = document.getElementById("title");
            var info = document.getElementById("info");
            var timer=null;
            var index=0;
            var data=[
                    ["http://book.zongheng.com/book/458842.html","大夏王侯","入后宫，斗帝妃，封一品"],
                    ["http://book.zongheng.com/book/594492.html","火帝神尊","林杨挟无尽怒火重生，斩皇子，抗天威，强势逆袭，只手翻天。终成火帝神尊!"],
                    ["http://book.zongheng.com/book/563219.html","书剑长安","天岚谁负苍生剑，纷舞妖娆乱长安。酒泪祭雄杰，扬眉剑出鞘！睥视江山万里，谁是英豪？"],
                    ["http://book.zongheng.com/book/610334.html","唇唇欲动：腹黑总裁爱太凶","他不慎被人下了药，欲望难耐之时，遇上个该死的女人，居然解开了他的裤子，然后把他扔在地上离开了！她是在羞辱他？！"],
                    ["http://book.zongheng.com/book/564139.html","毒妇驯夫录","复仇难，光是狠毒还不够，还要有颗无坚不摧的小心脏！要不怎么扛得住那个整日惦记和自己共浴的色胚呢？好想欺师灭祖！"]
            ];
            var text = [];
            function auto() {
                index++;
                if(index>=list.length){
                    index=0
                }
                show(index);
            }
            timer = setInterval(auto,4000);
            function show(cur) {
                for(var i=0;i<list.length;i++){
                    list[i].className= "";
                   img[i].style.display = "none";
                    img[i].style.opacity = 0;
                    //fade(img[i],0);
                }
                list[cur].className += "on";
                img[cur].style.display = "block";
                 changeText(cur);
                fade(img[cur],100);
                index=cur;

            }
            main.onmouseover = function () {
                clearInterval(timer);
                timer=null;
            };
            main.onmouseout = function(){
                timer=setInterval(auto,3000);
            };

            for(var i=0;i<list.length;i++){
                list[i].inde =i;
                list[i].onmouseover=function () {
                    show(this.inde);
                };
            }
            function changeText(cur) {
                tit.innerHTML="";
                info.innerHTML="";
                text = data[cur];
                info.setAttribute("href",text[0]);
                tit.setAttribute("href",text[0]);
                info.setAttribute("title",text[2]);
                tit.setAttribute("title",text[1]);
                tit.innerHTML=text[1];
                info.innerHTML=text[2];
            }
            function getStyle(obj, attr){
                if(obj.currentStyle){
                    return obj.currentStyle[attr];
                } else {
                    return getComputedStyle(obj, null)[attr];
                }
            }
            function fade(obj,target,fn) {
                if(obj.timer){clearInterval(obj.timer);}
                obj.timer = setInterval(function(){
                    var cur =getStyle(obj,"opacity")*100;
                    var speed = (target-cur)/8;
                    speed = speed>0?Math.ceil(speed):Math.floor(speed);
                    if(cur >=100){
                        clearInterval(obj.timer);
                        obj.timer = null;
                        fn&&fn();
                    }
                    cur +=speed;
                    obj.style.opacity=cur/100;
                    obj.style.fifter="alpha(opacity="+cur+")";

                },20)

            }
        }
    </script>
</body>
</html>